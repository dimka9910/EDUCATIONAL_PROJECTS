alter table AUTO modify
        (PERSONNEL_ID NULL);


DROP TABLE journal;
DROP TABLE auto;
DROP TABLE auto_personnel;
DROP TABLE routes;

CREATE TABLE routes
(
    id number(*, 0) GENERATED BY DEFAULT AS IDENTITY
        START WITH 1 INCREMENT BY 1 NOCACHE,
    name varchar2(50 BYTE) NOT NULL,
    CONSTRAINT routes_pk PRIMARY KEY (id)
);

CREATE TABLE auto_personnel
(
    id number(*, 0) GENERATED BY DEFAULT AS IDENTITY
        START WITH 1 INCREMENT BY 1 NOCACHE,
    first_name varchar2(20 BYTE) NOT NULL,
    last_name varchar2(20 BYTE) NOT NULL,
    father_name varchar2(20 BYTE) NOT NULL,
    CONSTRAINT auto_personnel_pk PRIMARY KEY (id)
);

CREATE TABLE auto
(
    id number(*, 0) GENERATED BY DEFAULT AS IDENTITY
        START WITH 1 INCREMENT BY 1 NOCACHE,
    num varchar2(50 BYTE) NOT NULL,
    color varchar2(50 BYTE) NOT NULL,
    mark varchar2(50 BYTE) NOT NULL,
    personnel_id number(*, 0),
    CONSTRAINT auto_pk PRIMARY KEY (id),
    CONSTRAINT fk_auto_auto_personnel FOREIGN KEY (personnel_id)
        REFERENCES auto_personnel(id)
);

ALTER TABLE auto
    ADD CONSTRAINT constraint_name UNIQUE (num, color, mark);


CREATE TABLE journal
(
    id number(*, 0) GENERATED BY DEFAULT AS IDENTITY
        START WITH 1 INCREMENT BY 1 NOCACHE,
    time_out timestamp(3),
    time_in timestamp(3),
    auto_id number(*, 0) NOT NULL,
    route_id number(*, 0) NOT NULL,
    CONSTRAINT journal PRIMARY KEY (id),
    CONSTRAINT fk_journal_auto FOREIGN KEY (auto_id)
        REFERENCES auto(id),
    CONSTRAINT fk_journal_routes FOREIGN KEY (route_id)
        REFERENCES routes(id)
);